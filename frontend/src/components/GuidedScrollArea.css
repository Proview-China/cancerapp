.scroll-guide {
  position: relative;
  width: 100%;
  height: 100%;
  display: flex;
}

.scroll-guide__viewport {
  position: relative;
  flex: 1;
  height: 100%;
  overflow-y: auto;
  overflow-x: hidden;
  scrollbar-width: none;
  -ms-overflow-style: none;
  scroll-behavior: smooth;
}

.scroll-guide__viewport::-webkit-scrollbar {
  width: 0;
  height: 0;
}

.scrollbar-track {
  position: absolute;
  inset: 8px 0 12px auto; /* 更靠右、上下留白不溢出容器 */
  width: 12px;
  display: flex;
  justify-content: center;
  pointer-events: none;
  opacity: 0;
  transform: translateX(6px);
  transition:
    opacity 0.35s ease,
    transform 0.45s cubic-bezier(0.32, 0.72, 0, 1);
}

.scrollbar-track::before {
  content: '';
  position: absolute;
  inset: 16px 5px;
  border-radius: 999px;
  background: linear-gradient(180deg, rgba(244, 234, 220, 0) 0%, rgba(244, 234, 220, 0.42) 45%, rgba(244, 234, 220, 0.62) 55%, rgba(244, 234, 220, 0) 100%);
  filter: blur(8px);
  opacity: 0.55;
  transition: opacity 0.35s ease;
}

.scrollbar-track.is-visible {
  pointer-events: auto;
  opacity: 1;
  transform: translateX(0);
}

.scrollbar-thumb {
  position: relative;
  width: 7px;
  border-radius: 999px;
  background: linear-gradient(180deg, rgba(255, 253, 246, 0.88) 0%, rgba(240, 228, 208, 0.72) 55%, rgba(227, 213, 190, 0.62) 100%);
  box-shadow:
    inset 0 1px 0 rgba(255, 255, 255, 0.85),
    inset 0 -2px 3px rgba(156, 140, 122, 0.22),
    0 8px 16px rgba(98, 86, 72, 0.18);
  cursor: grab;
  transition:
    transform 0.24s cubic-bezier(0.32, 0.72, 0, 1),
    box-shadow 0.24s ease,
    background 0.24s ease;
}

.scrollbar-thumb::before {
  content: '';
  position: absolute;
  inset: 10px -5px;
  border-radius: 999px;
  background: radial-gradient(circle, rgba(232, 214, 190, 0.3) 0%, rgba(232, 214, 190, 0) 70%);
  opacity: 0;
  transition: opacity 0.25s ease;
  pointer-events: none;
}

.scrollbar-thumb__inner {
  position: absolute;
  inset: -8px;
  border-radius: inherit;
  background:
    linear-gradient(0deg, rgba(255, 255, 255, 0.4) 0%, rgba(255, 255, 255, 0) 35%),
    linear-gradient(180deg, rgba(198, 182, 160, 0.25) 0%, rgba(198, 182, 160, 0) 65%);
  opacity: 0.55;
  transition: opacity 0.25s ease;
  pointer-events: none;
}

.scrollbar-thumb:hover,
.scrollbar-thumb.is-dragging {
  background: linear-gradient(180deg, rgba(255, 253, 246, 0.94) 0%, rgba(240, 228, 208, 0.82) 55%, rgba(225, 210, 188, 0.74) 100%);
  box-shadow:
    inset 0 1px 0 rgba(255, 255, 255, 0.9),
    inset 0 -2px 5px rgba(156, 140, 122, 0.28),
    0 12px 22px rgba(96, 84, 70, 0.24);
}

.scrollbar-thumb:hover::before,
.scrollbar-thumb.is-dragging::before {
  opacity: 1;
}

.scrollbar-thumb:hover .scrollbar-thumb__inner,
.scrollbar-thumb.is-dragging .scrollbar-thumb__inner {
  opacity: 0.85;
}

.scrollbar-thumb.is-dragging {
  cursor: grabbing;
}

.scrollbar-track:not(.is-visible) .scrollbar-thumb {
  transition-delay: 0.1s;
}

/* 侧栏统一显示滚动条轨道（与设置页一致） */
.analysis-scrollable ~ .scrollbar-track {
  pointer-events: auto;
  opacity: 1;
  transform: none;
  top: 8px;
  right: 10px;   /* 靠右显示在火山口与外框之间 */
  bottom: 16px;  /* 不越过侧栏底部 */
}

.scroll-guide::after,
.scroll-guide::before {
  content: '';
  position: absolute;
  left: 12px;
  right: 12px;
  height: 28px;
  pointer-events: none;
  background: linear-gradient(180deg, rgba(244, 236, 226, 0.78) 0%, rgba(244, 236, 226, 0));
  opacity: 0;
  transition: opacity 0.35s ease;
}

.scroll-guide::before {
  top: 0;
}

.scroll-guide::after {
  bottom: 0;
  transform: rotate(180deg);
}
.scroll-guide.has-top-shadow::before {
  opacity: 1;
}

.scroll-guide.has-bottom-shadow::after {
  opacity: 1;
}
